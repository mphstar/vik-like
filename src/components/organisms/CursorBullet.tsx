import {useRef,useEffect} from 'react';
export function CursorBullet(){
  const ref=useRef<HTMLDivElement|null>(null); const ringRef=useRef<HTMLDivElement|null>(null);
  useEffect(()=>{ if(!window.matchMedia('(pointer:fine)').matches) return; const el=ref.current; if(!el) return; let tx=innerWidth/2,ty=innerHeight/2,x=tx,y=ty,raf:number|null=null; const lerp=(a:number,b:number,n:number)=>a+(b-a)*n; const update=()=>{x=lerp(x,tx,0.22); y=lerp(y,ty,0.22); el.style.transform=`translate3d(${x}px,${y}px,0)`; if(ringRef.current) ringRef.current.style.transform=`translate3d(${x}px,${y}px,0)`; raf=requestAnimationFrame(update);}; const move=(e:MouseEvent)=>{tx=e.clientX; ty=e.clientY; if(el.style.opacity!=='1'){el.style.opacity='1'; if(ringRef.current) ringRef.current.style.opacity='1';}}; const down=()=>{el.classList.add('scale-75'); const ring=ringRef.current; if(ring){ring.classList.add('opacity-80','scale-150'); setTimeout(()=>ring.classList.remove('scale-150'),180);} }; const up=()=>{el.classList.remove('scale-75'); const ring=ringRef.current; if(ring){setTimeout(()=>ring.classList.remove('opacity-80'),220);} }; const leave=()=>{el.style.opacity='0'; if(ringRef.current) ringRef.current.style.opacity='0';}; raf=requestAnimationFrame(update); window.addEventListener('mousemove',move); window.addEventListener('mousedown',down); window.addEventListener('mouseup',up); window.addEventListener('mouseleave',leave); return ()=>{ if(raf) cancelAnimationFrame(raf); window.removeEventListener('mousemove',move); window.removeEventListener('mousedown',down); window.removeEventListener('mouseup',up); window.removeEventListener('mouseleave',leave); }; },[]);
  return (<><div ref={ringRef} className="pointer-events-none fixed top-0 left-0 z-[70] h-10 w-10 -translate-x-1/2 -translate-y-1/2 rounded-full border border-white/40 shadow-[0_0_14px_-2px_rgba(255,255,255,.35)] backdrop-blur-[2px] transition-all duration-300 ease-out opacity-0" style={{mixBlendMode:'screen'}} /> <div ref={ref} className="pointer-events-none fixed top-0 left-0 z-[71] h-3 w-3 -translate-x-1/2 -translate-y-1/2 rounded-full bg-white shadow-[0_0_10px_2px_rgba(255,255,255,0.55)] transition-transform duration-200 ease-out opacity-0" style={{mixBlendMode:'screen'}} /> </>);
}
